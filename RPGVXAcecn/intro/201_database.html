<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="en">
<head>
  <title>数据库</title>

  <meta http-equiv="Content-Type" content="text/html; charset=GB2312">

  <meta http-equiv="Content-Style-Type" content="text/css">
  <link href="style.css" type="text/css" rel="stylesheet">


  <meta content="MSHTML 6.00.2900.3268" name="GENERATOR">
</head>

<body>

<h1>数据库</h1>

<ul>

  <li><a href="#data_xxxx">$data_xxxx</a> 
  </li>
  <li><a href="#contents">数据库的内容</a> 
  </li>
  <li><a href="#access">数据库的读取</a> </li>
</ul>

<p>在解读篇，我们会就预置脚本是做什么的作详细的说明。</p>

<p>本章将介绍 RPGVX 的<strong>数据库</strong>在脚本内是如何使用的。</p>

<h2><a name="data_xxxx">$data_xxxx</a></h2>

<p>请从脚本编辑器左侧目录，查找名称为 Scene_Title 的组。在这个组的右侧窗口中，会发现如下的部分。这个是在显示游戏标题画面之前运行的脚本。</p>
<pre>    # 加载数据库<br>    $data_actors        = load_data("Data/Actors.rvdata")<br>    $data_classes       = load_data("Data/Classes.rvdata")<br>    $data_skills        = load_data("Data/Skills.rvdata")<br>    $data_items         = load_data("Data/Items.rvdata")<br>    $data_weapons       = load_data("Data/Weapons.rvdata")<br>    $data_armors        = load_data("Data/Armors.rvdata")<br>    $data_enemies       = load_data("Data/Enemies.rvdata")<br>    $data_troops        = load_data("Data/Troops.rvdata")<br>    $data_states        = load_data("Data/States.rvdata")<br>    $data_animations    = load_data("Data/Animations.rvdata")<br>    $data_common_events = load_data("Data/CommonEvents.rvdata")<br>    $data_system        = load_data("Data/System.rvdata")<br>    $data_areas         = load_data("Data/Areas.rvdata")<br><br></pre>

<p>作一下说明，这段的意思是从 RPGVX 保存的文件中读取数据库信息，并在脚本中代入到各种数据变量为其赋值。这些以 $ 
符号开头的变量是<strong>全局变量</strong>，因此这些数据在后面其它的脚本中也能引用。</p>

<p>其中的 load_data 是 <a href="../rgss/g_functions.html">RGSS 内建函数</a> 
之一，是一个从指定文件中读取数据的函数。比如第一行，就是表示从 Date 活页夹中的 Actors.rvdata 文件中读取数据，并代入全局变量 
$data_actors 中为其赋值。</p>

<h2><a name="contents">数据库的内容</a></h2>

<p>各个对象的具体情况如下所示。</p>

<table border="1" cellpadding="2" cellspacing="0">

  <tbody>

  <tr>

    <th>变量名称</th>

    <th>内容</th>

    <th>所属类</th>
    </tr>

  <tr>

    <td>$data_actors</td>

    <td>主角</td>

    <td><a href="../rgss/gc_rpg_actor.html">RPG::Actor</a> 数组</td>
    </tr>

  <tr>

    <td>$data_classes</td>

    <td>职业</td>

    <td><a href="../rgss/gc_rpg_class.html">RPG::Class</a> 数组</td>
    </tr>

  <tr>

    <td>$data_skills</td>

    <td>技能</td>

    <td><a href="../rgss/gc_rpg_skill.html">RPG::Skill</a> 数组</td>
    </tr>

  <tr>

    <td>$data_items</td>

    <td>物品</td>

    <td><a href="../rgss/gc_rpg_item.html">RPG::Item</a> 数组</td>
    </tr>

  <tr>

    <td>$data_weapons</td>

    <td>武器</td>

    <td><a href="../rgss/gc_rpg_weapon.html">RPG::Weapon</a> 数组</td>
    </tr>

  <tr>

    <td>$data_armors</td>

    <td>防具</td>

    <td><a href="../rgss/gc_rpg_armor.html">RPG::Armor</a> 数组</td>
    </tr>

  <tr>

    <td>$data_enemies</td>

    <td>敌人</td>

    <td><a href="../rgss/gc_rpg_enemy.html">RPG::Enemy</a> 数组</td>
    </tr>

  <tr>

    <td>$data_troops</td>

    <td>敌人队伍</td>

    <td><a href="../rgss/gc_rpg_troop.html">RPG::Troop</a> 数组</td>
    </tr>

  <tr>

    <td>$data_states</td>

    <td>状态</td>

    <td><a href="../rgss/gc_rpg_state.html">RPG::State</a> 数组</td>
    </tr>

  <tr>

    <td>$data_animations</td>

    <td>动画</td>

    <td><a href="../rgss/gc_rpg_animation.html">RPG::Animation</a> 数组</td>
    </tr>

  <tr>

    <td>$data_common_events</td>

    <td>全局事件</td>

    <td><a href="../rgss/gc_rpg_commonevent.html">RPG::CommonEvent</a> 
数组</td>
    </tr>

  <tr>

    <td>$data_system</td>

    <td>总参数（包括[用语]）</td>

    <td><a href="../rgss/gc_rpg_system.html">RPG::System</a></td>
    </tr>

  <tr>

    <td>$data_areas</td>

    <td>遇敌区域</td>

    <td><a href="../rgss/gc_rpg_area.html">RPG::Area</a> 
数组</td>
    </tr>
  </tbody>
</table>

<p>从主角到全局事件的这 11 种数据，是和数据库中标记的号码相对应的数组。但是 RPGVX 的数据 ID 是从 1 号开始的，为了使数据 ID 
和数组的附加码一致，所以数组的第一个（0 号）单元为 nil。</p>

<h2><a name="access">数据库的使用</a></h2>

<p>比如下一个脚本是表示主角中 1 号人物的名称。</p>
<pre>$data_actors[1].name<br></pre>

<p>下一个脚本是表示敌人中 2 号敌人的 MaxHP。</p>
<pre>$data_enemies[2].maxhp<br></pre>

<p>下一个脚本是表示物品中 3 号物品指定图标的代号。</p>
<pre>$data_items[3].iconi_index<br></pre>

<p>下一个脚本是表示系统中 4 号开关的名称。</p>
<pre>$data_system.switches[4]<br></pre>

<p>这些要点，请在参考中参照数据的属性（变量）名称来查看。想以 p 函数显示这些数据的话，可以使用事件指令的「插入RGSS脚本语句」命令来执行，这样会很方便。</p>

<h6></h6>

</body>
</html>
