<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html lang="en">
<head>
  <title>Vocab module</title>


  <meta http-equiv="Content-Type" content="text/html; charset=GB2312">

  <meta http-equiv="Content-Style-Type" content="text/css">

  <link href="style.css" type="text/css" rel="stylesheet">

  <meta content="MSHTML 6.00.2900.3268" name="GENERATOR">

</head>

<body>

<h1>声音模块</h1>

<ul>

  <li><a href="#se_object">效果音效对像</a> </li>

  <li><a href="#data_def">类的定义</a> </li>

  <li><a href="#audio">Audio 音乐模块</a> </li>

  <li><a href="#check_empty">空文字列的判定</a> </li>

  <li><a href="#nest">嵌套定义</a> </li>

</ul>

<p>Sound是为了演奏数据库系统设定的效果音效的模块。<font color="#ffffff">柳佳
淇</font></p>

<h2><a name="se_object">效果音效对像</a></h2>

<p>请选择左边的Sound 脚本。<font color="#ffffff">柳佳淇</font></p>

<pre>module Sound<br></pre>

<p>这行，由于前面刚刚学完所以应该没有问题。与Vocab一样，是模块定义。</p>

<pre>
  def self.play_cursor
    $data_system.sounds[0].play
  end
</pre>

<p>模块方法的定义也应该没有问题。新的东西是方法的内容。</p>

<pre>  $data_system.sounds[0].play<br></pre>

<p>$data_system 是表示<a href="../rgss/gc_rpg_system.html">RPG::System</a>
类的实变量的全局变量。</p>

<p>sounds 是用来存放<a href="../rgss/gc_rpg_se.html">RPG::SE</a>
类的实变量的数组。0是[光标移动] ，1是[决定] 等等。</p>

<p>效果音乐记录着TKOOL设定好的 SE 的文件名，音量，节拍。还有，为了演奏自己还准备 play 的方法。</p>

<p>实际上想要演奏效果音乐的时候，使用下面的方法。</p>

<pre>Sound.play_cursor<br></pre>

<p>比起$data_system.sounds[0].play，
这个方法比较简单，也是这个Sound模块存在的意义。使用[全局检索] 的时候，发现很多地方都用到这个。</p>

<h2><a name="data_def">类的定义</a></h2>

<p>我们已经学会了使用play来演奏效果音乐，说起来效果音乐，也不过是数据，如果不知道是如何执行的，用的时候就会比较濉<font color="#ffffff">柳佳淇</font></p>

<p>首先确认 <a href="../rgss/gc_rpg_se.html">RPG::SE</a>
的内容，在<strong>定义</strong>里面有这样一段脚本。<font color="#ffffff">柳
佳淇</font></p>

<pre>
module RPG
  class SE < AudioFile
    def play
      unless @name.empty?
        Audio.se_play("Audio/SE/" + @name, @volume, @pitch)
      end
    end
    def self.stop
      Audio.se_stop
    end
  end
end
</pre>

<p>这个脚本不在脚本编辑器里面。在RGSS 的内部RPG::SE 类里面定义的。以<a href="../rgss/gc_rpg_system.html">RPG::System</a>
为例子，数据库很多内容肯定有定义的。想要了解的话就去读一读吧</p>

<h2><a name="audio">Audio 音乐模块</a></h2>

<p>RPG::SE 类的定义里面有几个重要的地方，首先来看这行。</p>

<pre> Audio.se_play("Audio/SE/" + @name, @volume, @pitch)<br></pre>

<p>这里调用<a href="../rgss/gm_audio.html">Audio</a>模
块的se_play方法。实际上演奏效果音乐的还是音乐模块，配备好的脚本里面，虽然没有直接调用音乐模块，在基础篇用的<a href="../rgss/gm_graphics.html">Graphics</a>是同等的重要，请记住这
个模块。 </p>

<p>带@是 <strong>实变量</strong>。忘了的人请复习基础篇的<a href="112_class.html">类定义</a>。<font color="#ffffff">柳
佳淇</font></p>

<h2><a name="check_empty">空文字列的判定</a></h2>

<p>RPG::SE 类的 play 方法的内容实际上是下面的 3 行。<font color="#ffffff">柳
佳淇</font></p>

<pre>  unless @name.empty?
    Audio.se_play("Audio/SE/" + @name, @volume, @pitch)
  end</pre>

<p>unless 这个我们在基础篇的<a href="105_branch.html">条件分歧</a>中
学习过。<font color="#ffffff">柳佳淇</font></p>

<p>empty? 还没有学过，从名字就可以大致的推断有什么功能。是用来调查内容是否为空。</p>

<p>如果为空就会返回true。如果没有这个文件的话，可以不调用，这样就不会弹出错误提示，这也正是这个条件分歧人性化的地方。<font color="#ffffff">柳佳淇</font></p>

<h2><a name="nest">嵌套定义</a></h2>

<p>下面，我们来关注一下类的定义的外框。<font color="#ffffff">柳佳淇</font></p>

<pre>module RPG
  class SE < AudioFile
  end
end</pre>

<p>看了之后我们发现在模块定义里面有类的定义。在Ruby里面在模块或者类的定义里面还可以定义其他的模块和定义。可以参考前面学习的<strong>常
量</strong>，这个类可以写成 RPG::SE 。</p>

<p>在同一个模块里面'RPG::' 可以省略。AudioFile 实际上是 RPG::AudioFile 类，因为在相同的
RPG 模块里面，所以省略了模块名。</p>

<p>关于RPG::SE 类的探索我们就到这里了。超类和子类的关系忘了的，请复习<a href="108_object.html">对像</a>和<a href="112_class.html">类定义</a>。</p>

<h6></h6>
</body>
</html>
