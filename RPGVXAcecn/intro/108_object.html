<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>オブジェクト</title>
<link href="../style.css" type="text/css" rel="stylesheet">
</head>
<body>

<h1>オブジェクト</h1>
<ul>
<li><a href="#object">オブジェクトとクラス</a></li>
<li><a href="#method">メソッド</a></li>
<li><a href="#superclass">スーパークラス</a></li>
<li><a href="#instance">インスタンスの生成</a></li>
</ul>

<p>Ruby はオブジェクト指向言語です。
ここでは、<strong>オブジェクト</strong>とはどういうものかを
解説します。</p>


<h2><a name="object">オブジェクトとクラス</a></h2>
<p>Ruby で扱われるあらゆるデータは<strong>オブジェクト</strong>と
呼ばれています。</p>
<pre>
3               # 整数オブジェクト
1.5             # 浮動小数点数オブジェクト
&quot;Ruby&quot;          # 文字列オブジェクト
1..10           # 範囲オブジェクト
</pre>

<p>オブジェクトの種類のことを<strong>クラス</strong>と呼びます。
たとえば文字列オブジェクトは String、範囲オブジェクトは Range と
いうクラスに属しています。Ruby に組み込まれているクラスの一覧
は、<a href="../rgss/index.html">RGSS リファレンス</a> の中にある
<a href="../rgss/s_classes.html">組み込みクラス</a> のページで
確認することができます。</p>
<p>特定のクラスに属するオブジェクトであることを強調するため
に、<strong>インスタンス</strong>という言葉を使うこともあります。
クラスとは、言わばそれに属するオブジェクトにおける雛形となるものです。
大まかな設計図がクラスに備わっていて、オブジェクトの振る舞いを決めている
ことになります。オブジェクトは必ずいずれかのクラスに属しています。
よって、「このクラスに属しているオブジェクト」という表現を「このクラスの
インスタンス」と言い換えることができるということなのです。</p>


<h2><a name="method">メソッド</a></h2>
<p>試しに <a href="../rgss/sc_string.html">String</a> クラスの
ページがどうなっているか見てみましょう。今の段階では意味がよくわからない
かもしれませんが、それは気にしなくて構いません。実際に自分でスクリプトを
組むときにはこのリファレンスを頻繁に参照することになりますから、なるべく
早いうちに慣れておく必要があるのです。</p>
<p><strong>メソッド</strong>というものが羅列されているのが確認できた
でしょうか。これは、そのクラスに属するオブジェクト専用の関数のような
ものです。</p>
<p>メソッド一覧の中ほどに size という項目がありますね。これを
使ってみましょう。</p>
<pre>
a = &quot;Ruby&quot;

p a.size        # =&gt; 4
</pre>
<p>String クラスの size メソッドは、文字数を返すメソッド
です。&quot;Ruby&quot; という文字列は 4 文字ですから
4 という数字が返ってくるわけです (Ruby 1.9 からは全角文字も
1 文字として数えられるようになっています) 。</p>
<p>もうひとつ試してみましょう。文字列を大文字に変換する upcase
メソッドです。</p>
<pre>
a = &quot;Ruby&quot;

p a.upcase      # =&gt; &quot;RUBY&quot;
</pre>
<p>このように、オブジェクトのメソッドを呼び出すときは変数名の後に
&quot;.&quot; という記号を書き、その後に呼び出すメソッドを記述します。
操作の対象となるオブジェクトのことを<strong>レシーバ</strong>と
呼びます。ここでは a.upcase の a がレシーバです。</p>
<p>ところで、文字列以外のオブジェクトに対して、たとえば upcase
メソッドを呼び出したりしたらどうなるのでしょうか。</p>
<pre>
a = 3

p a.upcase      # ERROR!!
</pre>
<p>これはエラーになります。なぜなら 3 は整数であるため、upcase という
メソッドは定義されていないからです。</p>
<p>このようなメソッドの名前を暗記しようとする必要はありません。
文字列に対して何かの操作を行いたい場合は String クラスのメソッドを使う
ということだけ覚えておけば、リファレンスを開いて行いたい処理を探すだけ
で良いからです。頻繁に使用するメソッドは、自然と覚えてしまうことになる
でしょう。</p>
<p>なお、Ruby では、たとえば「String クラスの size メソッド」を示す
ときに String#size というふうに書く習慣があります。これは、Ruby
にこういう文法があるということではなく、説明上の便宜的な記法です。
リファレンスでもこの記法が使われているので、覚えておいてください。</p>


<h2><a name="superclass">スーパークラス</a></h2>
<p>3 や 65 などの整数は、<a href="../rgss/sc_fixnum.html">Fixnum</a>
クラスのインスタンスです。</p>
<p>Fixnum のメソッド一覧を見て、メソッドの数が少ないのを不思議に思った
方はいませんか。もちろん、整数に対して使用できるメソッドがこれだけしか
ないわけではありません。そのカギは<strong>スーパークラス</strong>と
いう欄にあります。<a href="../rgss/sc_integer.html">Integer</a> と
書かれていますね。</p>
<p>Integer クラスには chr というメソッドがあります。これは、その数字を
文字コードとする文字を返すというものです。試してみましょう。</p>
<pre>
a = 65

p a.chr         # =&gt; &quot;A&quot;
</pre>
<p>きちんと呼び出すことができました。65 というのは Fixnum クラスの
インスタンスだったはずなのに、なぜ Integer クラスのメソッドである chr
を呼び出してもエラーにならないのでしょうか。それは、Fixnum クラスは
Integer クラスから<strong>継承</strong>されているからです。</p>
<p>継承というのは、あるクラスを拡張して新たなクラスを作ることです。
基本的な振る舞いとなる元のクラスがあり、そこから派生した新しいクラス
がある状態。このとき、元となったクラスを<strong>スーパークラス</strong>、
新たなクラスを<strong>サブクラス</strong>と呼びます。</p>
<p>つまり、Fixnum クラスというのは Integer クラスを拡張して作られた
新しいクラスだということです。言い換えると、Integer クラスは Fixnum
クラスのスーパークラスだということになります。Integer クラスの性質は
継承によってすべて Fixnum クラスに受け継がれているため、メソッドなども
そのまま使うことができるのです。もちろん、Integer クラスのスーパー
クラスである <a href="../rgss/sc_numeric.html">Numeric</a> クラスや、
そのまたスーパークラスの <a href="../rgss/sc_object.html">Object</a>
クラスで定義されているメソッドも、Fixnum クラスのインスタンスから
呼び出すことが可能です。</p>
<p>ここまでの説明を読んで、なぜわざわざ複数のクラスに分割されている
のか疑問に思った方もいるでしょう。少し難しい話になりますが、継承の
意義は、別々のクラスに共通の振る舞いを持たせられることにあります。
たとえば、浮動小数点数は <a href="../rgss/sc_float.html">Float</a>
クラスのインスタンスで、これは Numeric クラスから継承されています。
整数と浮動小数点数は異なるものですが、どちらも「数」を表すという
点では共通しているため、その共通部分を Numeric クラスで定義すること
で重複をなくしているというわけです。</p>
<p>ツクールの概念で言うと、たとえば「装備品」というスーパークラス
に対して「武器」「防具」というサブクラスがあります。「装備品」共通の
特徴をスーパークラスで記述し、それぞれのサブクラスで「武器」と「防具」の
違いを記述しているということです。</p>


<h2><a name="instance">インスタンスの生成</a></h2>
<p>クラスからインスタンス (オブジェクト) を作成する方法には、大きく
分けて 2 種類があります。</p>
<p>第一の方法は、<strong>リテラル</strong>を使う方法です。
リテラルとはソースコード中に直接記述された値のことです。今まで
65 とか &quot;Ruby&quot; というように当たり前のように値を書いて使って
きましたが、これは厳密に言うと「リテラルを記述することで整数や文字列の
インスタンスを生成した」ということなのです。</p>
<p>第二の方法は、クラスをレシーバとして new
というメソッドを使う方法です。たとえば範囲オブジェクトの場合は
<a href="../rgss/sc_range.html">Range</a> クラスのインスタンス
なので、Range.new というように呼び出します。後述しますが、
自分で定義したクラスのインスタンスを生成するときには常にこちらの
方法を使用することになります。</p>
<p>次のコードは、どちらも範囲オブジェクトを作成して表示します。
前者が第一の方法、後者が第二の方法を使用しています。</p>
<pre>
p 1..10               # =&gt; 1..10
p Range.new(1, 10)    # =&gt; 1..10
</pre>



<h6></h6>

</body>
</html>
